# Serverless AWS Architecture with SNS, SQS, and Lambda

## Project Overview

This project implements a serverless architecture using AWS services, leveraging Simple Notification Service (SNS), Simple Queue Service (SQS), and AWS Lambda. The architecture is designed to facilitate asynchronous communication and efficient event processing in a scalable and cost-effective manner.

## Image Processing Workflow Overview

![Overview](https://github.com/renilsequeira/serverless-sns-sqs-lambda/assets/77531126/d19feaba-87f9-4b29-a806-e95431bef513)

### User Uploads Image to S3 Bucket:

A user initiates the workflow by uploading an image file to an Amazon S3 bucket. This action triggers an event notification within the S3 bucket.

### S3 Event Notification to SNS Topic:

Upon uploading the image file, an S3 event notification is automatically sent to an Amazon SNS (Simple Notification Service) topic. This topic acts as a central hub for handling notifications.

### SNS Distributes Notifications to SQS Queues:

The SNS topic is configured to distribute notifications to three separate Amazon SQS (Simple Queue Service) queues. Each SQS queue is subscribed to the SNS topic, allowing it to receive relevant notifications.

### Lambda Functions Triggered by SQS Queues:

Each SQS queue triggers a specific AWS Lambda function responsible for image processing. There are three Lambda functions, each designed to process images in a different format.

### Lambda Functions Resize and Save to S3 Bucket:

The Lambda functions receive notifications from the SQS queues and proceed to resize the uploaded images in their respective formats. The resulting resized images are then saved to a different folder within the same S3 bucket.

### Validation of Processed Images:

After the Lambda functions have executed, you can validate the processed images in the designated folders within the S3 bucket. These folders should contain the resized copies of the originally uploaded images.

### Logs in Amazon CloudWatch:

Additionally, logs generated by the Lambda functions during image processing are available in Amazon CloudWatch. You can review these logs for insights into the execution and any potential issues encountered during the image processing workflow.

With this setup, we can process images in various formats simultaneously, making everything super quick and responsive. It's like having a backstage pass to parallel image processing ‚Äì talk about a game-changer!

## Step 1: Create a Standard Amazon SNS Topic

### Setting up an Amazon SNS Topic

1. **Navigate to Simple Notification Service (SNS):**
   - Open the AWS Console and search for and select "Simple Notification Service."

2. **Choose Topics:**
   - From the options on the left, select "Topics."

3. **Create a New Topic:**
   - Click on "Create topic."

4. **Configure Topic Details:**
   - In the "Create topic" page under "Details," configure as follows:
     - *Type:* Choose "Standard."
     - *Name:* Enter a unique SNS topic name, like "resize-image-topic" 
   - Click "Create topic."

5. **Verify Creation:**
   - Look for the confirmation message. It should be something like:
     ```
     Topic resize-image-topic-1234 created successfully.
     ```

6. **Copy ARN and Topic Owner Values:**
   - In the "Details" section, copy the ARN (Amazon Resource Name) for your topic.
   - Also, grab the AWS account ID of the topic owner.
   - Save these values in notepad for future use.

7. **Note:**
   - Make sure to accurately copy the following values for reference in subsequent tasks of the lab. These details will be the keys to connecting different parts of our project seamlessly.
     - *Topic Name:* [Your Chosen Topic Name]
     - *Topic ARN (Amazon Resource Name):* [Copied ARN]
     - *AWS Account ID (Topic Owner):* [Copied AWS Account ID]

   These values are essential for configuring other components in the workflow. Keep them handy for a smooth setup process.

## Step 2: Create Three Amazon SQS Queues

### Step 2.1: Create an Amazon SQS Queue for the Thumbnail üñºÔ∏è

**Objective:** Create an SQS queue named thumbnail-queue for processing thumbnail images.

1. **Navigate to Simple Queue Service (SQS):**

2. **Create a New Queue:**
   - On the SQS home page, choose "Create queue."

3. **Configure Queue Details:**
   - On the "Create queue" page, in the "Details" section:
     - *Type:* Choose "Standard" (default).
     - *Name:* Enter `thumbnail-queue`.
     - Leave the default values for other configuration parameters.
   - Choose "Create queue."

4. **Verify Queue Creation:**
   - Check for the expected service output message:
     ```
     Queue thumbnail-queue created successfully.
     ```

### Step 2.2: Subscribe Thumbnail Queue to SNS Topic üíå

**Objective:** Subscribe the thumbnail-queue to the SNS topic.

1. **Access the SQS Queue Detail Page:**
   - On the queue's detail page, choose the "SNS subscriptions" tab.

2. **Subscribe to Amazon SNS Topic:**
   - Choose "Subscribe to Amazon SNS topic."

3. **Specify SNS Topic:**
   - In the "Use existing resource" section, choose the `resize-image-topic` SNS topic created earlier.
   - Choose "Save."

4. **Verify Subscription:**
   - Check for the expected service output message:
     ```
     Subscribed successfully to topic arn:aws:sns:region:account-id:resize-image-topic-xxxx.
     ```

### Step 2.3: Create and Subscribe Two More SQS Queues üöÄ

**Objective:** Create two additional SQS queues (web-queue and mobile-queue) and subscribe them to the SNS topic.

1. **Create SQS Queue for Web-Sized Images:**
   - Follow the same steps as in Step 2.1, but name the queue `web-queue`.

2. **Subscribe Web Queue to SNS Topic:**
   - Follow the steps in Step 2.2 to subscribe `web-queue` to the `resize-image-topic`.

3. **Create SQS Queue for Mobile-Sized Images:**
   - Follow the same steps as in Step 2.1, but name the queue `mobile-queue`.

4. **Subscribe Mobile Queue to SNS Topic:**
   - Follow the steps in Step 2.2 to subscribe `mobile-queue` to the `resize-image-topic`.

5. **Verify Queue and Subscription Creation:**
   - Check for the expected service output messages:
     ```
     Queue web-queue created successfully.
     Subscribed successfully to topic arn:aws:sns:region:account-id:resize-image-topic-xxxx.

     Queue mobile-queue created successfully.
     Subscribed successfully to topic arn:aws:sns:region:account-id:resize-image-topic-xxxx.
     ```

### Step Complete:

You have successfully created three Amazon SQS queues and subscribed them to the `resize-image-topic` SNS topic for receiving image resizing notifications.
